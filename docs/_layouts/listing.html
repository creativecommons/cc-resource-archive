<html>
<head>
<title>{{ page.title }} | Creative Commons Resource Archive</title>
<link rel="stylesheet" type="text/css" href="/style.css" />


	{% if page.title == "All" %}

<script>

  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-2010376-29', 'auto');
  ga('send', 'pageview');


	//updated get query string function

	function getUrlVars() {
		const vars = {};
		const queryString = window.location.search.substring(1);
		const params = new URLSearchParams(queryString);

		for (const [key, value] of params) {
			vars[key] = value;
		}

		return vars;
	}
	//updated query string function
	function updateQueryString(key, value, url = window.location.href) {
		const urlObj = new URL(url);
		const params = new URLSearchParams(urlObj.search);

		if (params.has(key)) {
			if (value != null) {
				params.set(key, value);
			} else {
				params.delete(key);
			}
		} else if (value != null) {
			params.append(key, value);
		}

		urlObj.search = params.toString();
		return urlObj.toString();
	}


	document.write("<style>.thumbnailbox { display: none; }</style>");

	function removeQueryString() {
		var url = window.location.href;
		var updatedUrl = url.replace(/(\?|&)quer=([^&]*)/, '');
		window.location.href = updatedUrl;
	}

var topic = getUrlVars()["topic"];
var language = getUrlVars()["language"];
var medium = getUrlVars()["medium"];

if (topic === undefined && medium === undefined && language === undefined) {
document.write("<style>.thumbnailbox { display: block; }</style>");
}
else {
	document.write("<style>");
	if (topic != undefined) {document.write("."+topic)};
	if (medium != undefined) {document.write("."+medium)};
	if (language != undefined) {document.write("."+language)};
	document.write(" { display: block; }</style>");
	};

document.write("<style>");
 if (topic != undefined) {document.write(" .resourcenavtopicknown");}
	else {document.write(" .resourcenavtopicunknown");};
 if (medium != undefined) {document.write(", .resourcenavmediumknown");}
	else {document.write(", .resourcenavmediumunknown");};
 if (language != undefined) {document.write(", .resourcenavlanguageknown");}
	else {document.write(", .resourcenavlanguageunknown");};
 document.write(" { display: block; }</style>");
</script>

	{% endif %}

</head>


<body>

	{% include header.html %}

<h1>
	{% unless page.title == 'Home' %}
		<a href="/">
	{% endunless %}
Creative Commons Resource Archive
	{% unless page.title == 'Home' %}
		</a>
	{% endunless %}
</h1>

{{content}}



<div id="thumbnaillist">

	{% for i in (1..16) %}
		{% for page in site.pages %}
			{% if page.layout == 'resource' %}
				{% if page.featured == i %}
					{% if page.topic contains topicfilter or topicfilter == null %}
					{% if page.medium contains mediumfilter or mediumfilter == null %}
					{% if page.language contains languagefilter or languagefilter == null %}
						<div class="thumbnailbox {{ page.topic }} {{ page.medium }} {{page.language}}">
						<a href="{{ page.permalink }}">
						<div class="thumbnailtitle"><h3>{{ page.title }}</h3></div>
						<div class="thumbnail" style="background-image: url('{{ page.image-thumb }}'); "></div>
						</a>
						<div class="thumbnailblurb">{{ page.blurb }}</div>
						</div>
					{% endif %}{% endif %}{% endif %}
				{% endif %}
			{% endif %}
		{% endfor %}
	{% endfor %}

{% unless page.title == 'Home' %}
	{% for i in (1..4) %}
		{% for page in site.pages %}
			{% if page.layout == 'resource' %}
				{% if page.weight == i %}
					{% unless page.featured %}
						{% if page.{{paramfilter}} == page.{{paramvalue %}
					{% if page.topic contains topicfilter or topicfilter == null %}
					{% if page.medium contains mediumfilter or mediumfilter == null %}
					{% if page.language contains languagefilter or languagefilter == null %}
							<div class="thumbnailbox {{ page.topic }} {{ page.medium }} {{page.language}}">
							<a href="{{ page.permalink }}">
							<div class="thumbnailtitle"><h3>{{ page.title }}</h3></div>
							<div class="thumbnail" style="background-image: url('{{ page.image-thumb }}'); "></div>
							</a>
							<div class="thumbnailblurb">{{ page.blurb }}</div>
							</div>
					{% endif %}{% endif %}{% endif %}
						{% endif %}
					{% endunless %}
				{% endif %}
			{% endif %}
		{% endfor %}
	{% endfor %}
{% endunless %}

</div>



</body>
</html>
